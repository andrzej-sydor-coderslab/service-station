<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/css/materialize.min.css">
    <link rel="stylesheet" th:href="@{/css/styles.css}" type="text/css">
    <title>Finish Repair</title>
</head>
<body>
<div th:include="header.html"></div>
<section class="container section">
    <div class="row">

        <div class="col s12">
            <h3 class="title">Finishing Order</h3>
        </div>

        <div class="col s12">
            <h5>Please check the repair report and set the price before finish</h5>
        </div>

        <form method="post" th:action="@{/orders/finish-repair-action}" th:object="${order}">
            <div class="col s12">
                <p>Repair progress report:
                <span class="error-message" th:if="${#fields.hasErrors('repairProgressReport')}"
                    th:errors="*{repairProgressReport}"></span></p>
                <div class="cancel-sheet">
                    <textarea class="cancel-textarea" th:field="*{repairProgressReport}" rows="10" cols="60" placeholder="required"/>
                </div>
            </div>

            <div class="col s12">
                <p><span>Price of service</span>: <input
                        th:field="*{priceOfService}"
                        type="number" step="0.01"
                        maxlength="15"
                        placeholder="not set"/><span
                        class="error-message" th:if="${#fields.hasErrors('priceOfService')}"
                        th:errors="*{priceOfService}"></span></p>
            </div>

            <div class="col s12 center-align">
                <input type="submit" name="action" value="Finish" class="btn-large">

                <a class="btn-large" th:href="@{'/orders/details/' + ${order.id}}">Cancel</a>
            </div>

            <input type="hidden" th:field="*{id}"/>
            <input type="hidden" th:field="*{title}"/>
            <input type="hidden" th:field="*{initialDiagnosis}"/>
            <input type="hidden" th:field="*{plannedRepairStart}"/>
            <input type="hidden" th:field="*{actualRepairStart}"/>
            <input type="hidden" th:field="*{parts}"/>
            <input type="hidden" th:field="*{invoices}"/>
            <input type="hidden" th:field="*{created}"/>
            <input type="hidden" th:field="*{updated}"/>
            <input type="hidden" th:field="*{status}"/>
            <input type="hidden" th:field="*{vehicle}"/>
            <input type="hidden" th:field="*{employees}"/>
        </form>
    </div>
</section>
<div th:include="footer.html"></div>
</body>
</html>